function class(className, super)
	local cls = {};
	cls.className = className;

	cls.new = function (self,...)
		local o = {}
		o.cls = self;
		if(super~=nil) then
			o.super = super:new(...);
		end
		setmetatable(o,{__index=function (t,k)
			local v = self[k]
			if(k~='super' and v==nil and o.super~=nil) then
				v = o.super[k];
			end
			return v;
		end})

		local ctor = rawget(self, 'ctor')
        if ctor then
            ctor(o, ...)
        end

		return o;
	end
	
	return cls;

end


return class